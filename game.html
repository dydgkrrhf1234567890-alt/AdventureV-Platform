<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADVC Battle Arena - Web3</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        body { background-color: #120a1f; color: white; font-family: 'Verdana', sans-serif; text-align: center; user-select: none; }
        .container { max-width: 500px; margin: 20px auto; border: 3px solid #ff0055; border-radius: 20px; padding: 20px; box-shadow: 0 0 30px #ff0055; }
        h1 { color: #ff0055; text-shadow: 0 0 10px #ff0055; }
        #monster { font-size: 100px; cursor: pointer; transition: transform 0.1s; }
        #monster:active { transform: scale(0.9); }
        .stats { background: #221a36; padding: 10px; border-radius: 10px; margin: 10px 0; border: 1px solid #555; }
        .reward-text { color: #00ffcc; font-weight: bold; font-size: 20px; }
        .btn { background: linear-gradient(45deg, #ff0055, #ffcc00); border: none; color: white; padding: 10px 20px; border-radius: 30px; font-size: 16px; cursor: pointer; margin-top: 20px; }
        .wallet-box { font-size: 12px; color: #aaa; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öîÔ∏è ADVC Monster Hunt</h1>
        <div class="wallet-box">
            <p id="walletStatus">üî¥ Wallet Not Connected</p>
            <button id="connectBtn" class="btn" onclick="connectWallet()">ü¶ä Connect Wallet</button>
        </div>
        <hr style="border-color:#333; margin:20px 0;">
        <div class="stats">
            <p>HP: <span id="hp" style="color:red;">100</span> / 100</p>
            <p>üí∞ Earned: <span id="score" class="reward-text">0</span> ADVC</p>
        </div>
        <div id="monster" onclick="attack()">üëæ</div>
        <p id="msg" style="color:gray; height:20px;">Tap the monster!</p>
        <button id="claimBtn" class="btn" onclick="claimRewards()" style="display:none;">Claim 10 ADVC Now!</button>
    </div>

    <script>
        // ‚òÖ ÏôïÏûêÎãòÏùò ÏßÑÏßú Í∏∞Í≥Ñ Ï£ºÏÜå ‚òÖ
        const contractAddress = "0x4F5dF89Ff0b4a45F6e5507834B42E503e79761dd2CC218Cb5A"; 
        const abi = ["function claimReward() public"];

        let hp = 100;
        let score = 0;
        let provider, signer, contract;

        function attack() {
            if (hp > 0) {
                hp -= 20;
                document.getElementById("hp").innerText = hp;
                if (hp <= 0) {
                    score += 10;
                    document.getElementById("score").innerText = score;
                    document.getElementById("msg").innerText = "‚ú® Defeated! You can claim now! ‚ú®";
                    document.getElementById("claimBtn").style.display = "inline-block";
                    hp = 100;
                }
            }
        }

        async function connectWallet() {
            if (window.ethereum) {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                contract = new ethers.Contract(contractAddress, abi, signer);
                const addr = await signer.getAddress();
                document.getElementById("walletStatus").innerText = "üü¢ Connected: " + addr.substring(0,6) + "...";
                document.getElementById("connectBtn").style.display = "none";
            } else { alert("MetaMask required!"); }
        }

        async function claimRewards() {
            if (!contract) return alert("Connect Wallet First!");
            try {
                document.getElementById("msg").innerText = "‚è≥ Processing on Blockchain...";
                const tx = await contract.claimReward(); // ÏßÑÏßú ÏΩîÏù∏ ÏèòÎäî Î™ÖÎ†π!
                await tx.wait(); // Î∏îÎ°ùÏ≤¥Ïù∏ ÌôïÏ†ï Í∏∞Îã§Î¶¨Í∏∞
                alert("üéâ Success! 10 ADVC sent to your wallet!");
                score = 0;
                document.getElementById("score").innerText = score;
                document.getElementById("claimBtn").style.display = "none";
                document.getElementById("msg").innerText = "Monster revived!";
            } catch (err) {
                console.error(err);
                alert("Transaction Failed! (Check ADVC in contract)");
                document.getElementById("msg").innerText = "Error occurred.";
            }
        }
    </script>
</body>
</html>
