<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADVC Battle Arena</title>
    <style>
        body {
            background-color: #120a1f;
            color: white;
            font-family: 'Verdana', sans-serif;
            text-align: center;
            user-select: none;
        }
        .container {
            max-width: 500px;
            margin: 20px auto;
            border: 3px solid #ff0055;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 30px #ff0055;
        }
        h1 { color: #ff0055; text-shadow: 0 0 10px #ff0055; }
        
        #monster {
            font-size: 100px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        #monster:active { transform: scale(0.9); }

        .stats {
            background: #221a36;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            border: 1px solid #555;
        }
        .reward-text { color: #00ffcc; font-weight: bold; font-size: 20px; }
        
        .btn {
            background: linear-gradient(45deg, #ff0055, #ffcc00);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .wallet-box { font-size: 12px; color: #aaa; margin-bottom: 10px; }
        #connectBtn { background: #4caf50; }
    </style>
</head>
<body>

    <div class="container">
        <h1>âš”ï¸ ADVC Monster Hunt</h1>
        
        <div class="wallet-box">
            <p id="walletStatus">ğŸ”´ Wallet Not Connected</p>
            <button id="connectBtn" class="btn" onclick="connectWallet()">ğŸ¦Š Connect Wallet</button>
        </div>

        <hr style="border-color:#333; margin:20px 0;">

        <p>Tap the Monster to Earn ADVC!</p>

        <div class="stats">
            <p>HP: <span id="hp" style="color:red;">100</span> / 100</p>
            <p>ğŸ’° Earned: <span id="score" class="reward-text">0</span> ADVC</p>
        </div>

        <div id="monster" onclick="attack()">ğŸ‘¾</div>

        <p id="msg" style="color:gray; height:20px;">...</p>

        <button class="btn" onclick="claimRewards()">Claim Rewards</button>
    </div>

    <script>
        let hp = 100;
        let score = 0;
        let userAccount = null;

        // 1. ëª¬ìŠ¤í„° ê³µê²©
        function attack() {
            if (hp > 0) {
                hp -= 10;
                document.getElementById("hp").innerText = hp;
                document.getElementById("monster").style.transform = "scale(0.9)";
                setTimeout(() => document.getElementById("monster").style.transform = "scale(1)", 100);
                if (navigator.vibrate) navigator.vibrate(50);
            }

            if (hp <= 0) {
                score += 10;
                document.getElementById("score").innerText = score;
                document.getElementById("msg").innerText = "âœ¨ Monster Defeated! +10 ADVC âœ¨";
                document.getElementById("msg").style.color = "#00ffcc";
                
                setTimeout(() => {
                    hp = 100;
                    document.getElementById("hp").innerText = hp;
                    document.getElementById("msg").innerText = "A new monster appeared!";
                    document.getElementById("msg").style.color = "gray";
                }, 1000);
            }
        }

        // 2. ì§€ê°‘ ì—°ê²°
        async function connectWallet() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    userAccount = accounts[0];
                    document.getElementById("walletStatus").innerHTML = "ğŸŸ¢ Connected: " + userAccount.substring(0,6) + "...";
                    document.getElementById("connectBtn").style.display = "none";
                } catch (error) { alert("Connection Failed!"); }
            } else { alert("Please use MetaMask Browser!"); }
        }

        // 3. ë³´ìƒ ì²­êµ¬ (UI ë¦¬ì…‹ ê¸°ëŠ¥ íƒ‘ì¬!)
        function claimRewards() {
            if (!userAccount) {
                alert("âš ï¸ Please Connect Wallet first!");
                return;
            } 
            
            if (score === 0) {
                alert("âš ï¸ Earn points first!");
                return;
            }

            // [ì¤‘ìš”] ë‚˜ì¤‘ì— ì—¬ê¸°ì— 'ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ í˜¸ì¶œ ì½”ë“œ'ë¥¼ ë„£ì„ ê±°ì˜ˆìš”!
            // ì§€ê¸ˆì€ í™”ë©´ìƒì—ì„œ ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ë§Œë“œëŠ” ê¸°ëŠ¥ë§Œ ì‘ë™í•©ë‹ˆë‹¤.
            alert("ğŸ‰ [System] Requesting " + score + " ADVC Payment...");
            
            score = 0; 
            document.getElementById("score").innerText = score; 
            document.getElementById("msg").innerText = "Waiting for Transaction...";
            document.getElementById("msg").style.color = "yellow";
        }
    </script>

</body>
</html>
