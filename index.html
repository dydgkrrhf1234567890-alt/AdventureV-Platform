<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADVC Empire Protocol (Real-Net)</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js" type="application/javascript"></script>
    
    <style>
        body {
            background-color: #050505;
            color: #00ffcc;
            font-family: 'Courier New', Courier, monospace;
            text-align: center;
            margin: 0; padding: 0;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);
            user-select: none;
        }
        h1 { font-size: 2.0rem; text-shadow: 0 0 15px #00ffcc; margin-bottom: 5px; }
        .container { width: 90%; max-width: 400px; padding: 20px; display: flex; flex-direction: column; align-items: center; margin-top: 80px; }
        
        .score-board {
            font-size: 2.0rem; color: #ffd700; text-shadow: 0 0 10px #ffd700;
            margin: 20px 0 5px 0; font-weight: bold; word-break: break-all;
        }
        .score-sub { font-size: 0.8rem; color: #666; margin-bottom: 30px; }
        
        .ai-core {
            width: 150px; height: 150px;
            background: radial-gradient(circle at 30% 30%, #ff00cc, #660066);
            border-radius: 50%; box-shadow: 0 0 30px #ff00cc;
            cursor: pointer; transition: transform 0.1s; margin-bottom: 30px;
            border: 2px solid #ff66ff;
        }
        .ai-core:active { transform: scale(0.95); }
        
        #connect-btn, #claim-btn {
            background: transparent; border: 1px solid #ff6600; color: #ff6600;
            padding: 10px 20px; cursor: pointer; font-family: inherit; margin-bottom: 20px; border-radius: 5px; font-weight: bold;
        }
        #claim-btn { border-color: #333; color: #555; pointer-events: none; }
    </style>
</head>
<body>
    <div style="width: 100%; background-color: #000; color: #FFD700; text-align: center; padding: 15px 0; border-bottom: 2px solid #FFD700; font-family: monospace; position: absolute; top: 0;">
        <h2 style="margin: 0; text-shadow: 0 0 10px #FFD700;">âœ¨ GENESIS REAL-NET: ONLINE âœ¨</h2>
        <p style="margin: 5px 0 0 0; font-size: 0.9em;">System Authority: Prince Solomon | Network: Polygon (POL)</p>
    </div>

    <div class="container">
        <button id="connect-btn" onclick="connectWallet()">ğŸ¦Š Connect Real Wallet</button>

        <h1>MY ADVC WALLET</h1>
        
        <div class="score-board" id="balance-display">--- ADVC</div>
        <div class="score-sub" id="status-msg">ì§€ê°‘ì„ ì—°ê²°í•˜ì—¬ ì‹¤ì œ ìì‚°ì„ í™•ì¸í•˜ì„¸ìš”.</div>

        <button id="claim-btn" onclick="sendTestTransaction()">ğŸ’¸ Test Transaction (ì „ì†¡ í…ŒìŠ¤íŠ¸)</button>

        <div class="ai-core" onclick="alert('ë¦¬ì–¼ ëª¨ë“œì—ì„œëŠ” ìë™ ì±„êµ´ ê¸°ëŠ¥ì´ ë¸”ë¡ì²´ì¸ ì†ë„ì— ë§ì¶°ì§‘ë‹ˆë‹¤.')"></div>
    </div>

    <script>
        const tokenAddress = "0x5b41e1f16507834B42E503e79761dd2CC218Cb5A"; 
        const tokenABI = [
            "function balanceOf(address owner) view returns (uint256)",
            "function decimals() view returns (uint8)",
            "function transfer(address to, uint256 amount) returns (bool)"
        ];

        let provider, signer, tokenContract, userAddress;

        async function connectWallet() {
            // ë„êµ¬ê°€ ì˜ ë¡œë”©ëëŠ”ì§€ í™•ì¸
            if (typeof ethers === 'undefined') {
                alert("âš  ì—°ê²° ë„êµ¬(Ethers.js)ê°€ ì•„ì§ ë¡œë”©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 3ì´ˆ ë’¤ì— ë‹¤ì‹œ ëˆŒëŸ¬ì£¼ì„¸ìš”!");
                return;
            }

            if (window.ethereum) {
                try {
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = provider.getSigner();
                    userAddress = await signer.getAddress();

                    const btn = document.getElementById("connect-btn");
                    btn.innerText = "ğŸ¦Š Connected: " + userAddress.substring(0,6) + "...";
                    btn.style.borderColor = "#00FF00"; btn.style.color = "#00FF00";

                    tokenContract = new ethers.Contract(tokenAddress, tokenABI, signer);
                    updateRealBalance();

                    const claimBtn = document.getElementById("claim-btn");
                    claimBtn.style.borderColor = "#ffd700"; claimBtn.style.color = "#ffd700";
                    claimBtn.style.pointerEvents = "auto";

                } catch (error) {
                    alert("ì—°ê²° ì‹¤íŒ¨: " + error.message);
                }
            } else {
                alert("ë©”íƒ€ë§ˆìŠ¤í¬ê°€ í•„ìš”í•©ë‹ˆë‹¤!");
            }
        }

        async function updateRealBalance() {
            try {
                const balance = await tokenContract.balanceOf(userAddress);
                const decimals = await tokenContract.decimals();
                const formattedBalance = ethers.utils.formatUnits(balance, decimals);
                
                // ì½¤ë§ˆ ì°ì–´ì„œ ì˜ˆì˜ê²Œ ë³´ì—¬ì£¼ê¸°
                const displayNum = Number(formattedBalance).toLocaleString(undefined, {maximumFractionDigits: 2});
                
                document.getElementById("balance-display").innerText = displayNum + " ADVC";
                document.getElementById("status-msg").innerText = "âœ… Blockchain Verified (Real Asset)";
            } catch (err) {
                console.error(err);
                document.getElementById("balance-display").innerText = "Error (Network Busy)";
            }
        }

        async function sendTestTransaction() {
            if(!tokenContract) return;
            const amount = prompt("í…ŒìŠ¤íŠ¸ë¡œ ì „ì†¡í•  ADVC ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”:", "0.1");
            if(!amount) return;

            try {
                alert(">>> [ë©”íƒ€ë§ˆìŠ¤í¬ í™•ì¸ í•„ìš”]\nê°€ìŠ¤ë¹„(POL) ìŠ¹ì¸ ì°½ì´ ëœ¨ë©´ 'í™•ì¸'ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
                const decimals = await tokenContract.decimals();
                const parseAmount = ethers.utils.parseUnits(amount, decimals);
                const tx = await tokenContract.transfer(userAddress, parseAmount);
                alert(">>> [ì „ì†¡ ì‹œì‘] ë¸”ë¡ì²´ì¸ì— ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤...\nHash: " + tx.hash);
                await tx.wait();
                alert("âœ… [ì „ì†¡ ì„±ê³µ] ë¸”ë¡ì²´ì¸ ê±°ë˜ê°€ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤!");
                updateRealBalance();
            } catch (err) {
                alert("ì „ì†¡ ì·¨ì†Œ ë˜ëŠ” ì‹¤íŒ¨: " + err.message);
            }
        }
    </script>
</body>
</html>
