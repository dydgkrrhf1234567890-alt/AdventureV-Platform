<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADVC Empire (Real-Net)</title>
    <style>
        body {
            background-color: #050505; color: #00ffcc;
            font-family: 'Courier New', Courier, monospace;
            text-align: center; margin: 0; padding: 0;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            min-height: 100vh;
            background-image: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);
            user-select: none;
        }
        h1 { font-size: 2.0rem; text-shadow: 0 0 15px #00ffcc; margin-bottom: 5px; }
        .container { width: 90%; max-width: 400px; padding: 20px; display: flex; flex-direction: column; align-items: center; margin-top: 80px; }
        .score-board { font-size: 1.8rem; color: #ffd700; text-shadow: 0 0 10px #ffd700; margin: 20px 0 5px 0; font-weight: bold; word-break: break-all; }
        .score-sub { font-size: 0.8rem; color: #666; margin-bottom: 30px; }
        .ai-core {
            width: 150px; height: 150px;
            background: radial-gradient(circle at 30% 30%, #ff00cc, #660066);
            border-radius: 50%; box-shadow: 0 0 30px #ff00cc;
            cursor: pointer; transition: transform 0.1s; margin-bottom: 30px; border: 2px solid #ff66ff;
        }
        .ai-core:active { transform: scale(0.95); }
        #connect-btn, #claim-btn {
            background: transparent; border: 1px solid #ff6600; color: #ff6600;
            padding: 10px 20px; cursor: pointer; font-family: inherit; margin-bottom: 20px; border-radius: 5px; font-weight: bold;
        }
        #claim-btn { border-color: #333; color: #555; pointer-events: none; }
    </style>
</head>
<body>
    <div style="width: 100%; background-color: #000; color: #FFD700; text-align: center; padding: 15px 0; border-bottom: 2px solid #FFD700; font-family: monospace; position: absolute; top: 0;">
        <h2 style="margin: 0; text-shadow: 0 0 10px #FFD700;">âœ¨ ADVC REAL-NET âœ¨</h2>
        <p style="margin: 5px 0 0 0; font-size: 0.9em;">Network: Polygon (POL)</p>
    </div>

    <div class="container">
        <button id="connect-btn" onclick="window.connectWallet()">ğŸ¦Š Connect Wallet</button>
        <h1>MY ADVC</h1>
        <div class="score-board" id="balance-display">--- ADVC</div>
        <div class="score-sub" id="status-msg">ì§€ê°‘ ì—°ê²° ëŒ€ê¸° ì¤‘...</div>
        <button id="claim-btn" onclick="window.sendTestTransaction()">ğŸ’¸ Test Send</button>
        <div class="ai-core"></div>
    </div>

    <script type="module">
        import { ethers } from "https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.esm.min.js";

        // ì™•ìë‹˜ì˜ ADVC í† í° ì£¼ì†Œ (ìˆ˜ì • ê¸ˆì§€)
        const tokenAddress = "0x5b41e1f16507834B42E503e79761dd2CC218Cb5A"; 
        const tokenABI = [
            "function balanceOf(address owner) view returns (uint256)",
            "function decimals() view returns (uint8)",
            "function transfer(address to, uint256 amount) returns (bool)"
        ];

        let provider, signer, tokenContract, userAddress;

        // ë²„íŠ¼ì´ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ windowì— í•¨ìˆ˜ë¥¼ ë“±ë¡
        window.connectWallet = async function() {
            if (!window.ethereum) { 
                alert("âš  ë©”íƒ€ë§ˆìŠ¤í¬ ì•± ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”!"); 
                return; 
            }

            try {
                // Ethersê°€ ì˜ ë¡œë”©ëëŠ”ì§€ í™•ì¸
                if (!ethers) throw new Error("ë„êµ¬ ë¡œë”© ì‹¤íŒ¨. ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.");

                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();

                // ë²„íŠ¼ ê¾¸ë¯¸ê¸°
                const btn = document.getElementById("connect-btn");
                btn.innerText = "Connected!";
                btn.style.borderColor = "#00FF00";
                btn.style.color = "#00FF00";

                // ê³„ì•½ ì—°ê²° ë° ì”ì•¡ ì¡°íšŒ
                tokenContract = new ethers.Contract(tokenAddress, tokenABI, signer);
                const balance = await tokenContract.balanceOf(userAddress);
                const decimals = await tokenContract.decimals();
                const formattedBalance = ethers.utils.formatUnits(balance, decimals);
                
                // ì”ì•¡ í‘œì‹œ
                document.getElementById("balance-display").innerText = Number(formattedBalance).toLocaleString(undefined, {maximumFractionDigits: 2}) + " ADVC";
                document.getElementById("status-msg").innerText = "âœ… ì§€ê°‘ ì—°ê²° ì™„ë£Œ (Real Asset)";
                
                // ì „ì†¡ ë²„íŠ¼ í™œì„±í™”
                const cBtn = document.getElementById("claim-btn");
                cBtn.style.borderColor = "#ffd700"; 
                cBtn.style.color = "#ffd700"; 
                cBtn.style.pointerEvents = "auto";

            } catch (err) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + err.message);
            }
        };

        window.sendTestTransaction = async function() {
            try {
                const amount = prompt("ì „ì†¡í•  ìˆ˜ëŸ‰ (ADVC):", "0.1");
                if(!amount) return;
                
                const decimals = await tokenContract.decimals();
                const parseAmount = ethers.utils.parseUnits(amount, decimals);
                
                alert(">>> ê°€ìŠ¤ë¹„ ìŠ¹ì¸ ì°½ì´ ëœ¨ë©´ 'í™•ì¸'ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
                const tx = await tokenContract.transfer(userAddress, parseAmount);
                
                alert("ì „ì†¡ ì‹œì‘! Hash: " + tx.hash);
            } catch (err) {
                alert("ì „ì†¡ ì‹¤íŒ¨: " + err.message);
            }
        };
    </script>
</body>
</html>
