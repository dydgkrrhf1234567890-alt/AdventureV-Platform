<!DOCTYPE html>
<html>
<head>
    <title>AdventureV : Crypto Market</title>
    <style>
        body { background-color: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', sans-serif; text-align: center; padding: 20px; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 15px; padding: 30px; max-width: 400px; margin: 0 auto; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        h2 { color: #f2cc60; border-bottom: 2px solid #30363d; padding-bottom: 10px; }
        .balance-box { background: #0d1117; padding: 15px; border-radius: 10px; margin: 20px 0; border: 1px solid #30363d; }
        .label { font-size: 14px; color: #8b949e; }
        .value { font-size: 24px; font-weight: bold; color: #fff; }
        
        /* ë©”íƒ€ë§ˆìŠ¤í¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .connect-btn { 
            width: 100%; padding: 15px; font-size: 18px; font-weight: bold; 
            color: #000; background: #f6851b; /* ë©”íƒ€ë§ˆìŠ¤í¬ ì£¼í™©ìƒ‰ */
            border: none; border-radius: 8px; 
            cursor: pointer; transition: 0.2s; margin-top: 10px; display: flex; align-items: center; justify-content: center;
        }
        .connect-btn:hover { background: #e2761b; transform: scale(1.02); }
        .connect-btn img { width: 24px; margin-right: 10px; }
        
        .back-btn { background: transparent; border: 1px solid #8b949e; color: #8b949e; margin-top: 20px; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .wallet-address { font-size: 12px; color: #2ea043; margin-top: 10px; word-break: break-all; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ¦Š Web3 Crypto Market</h2>
        <p>ê³¨ë“œë¥¼ ì½”ì¸(ETH/MATIC)ìœ¼ë¡œ êµí™˜í•©ë‹ˆë‹¤.</p>

        <div class="balance-box">
            <div class="label">ë³´ìœ  ê³¨ë“œ (Gold)</div>
            <div id="myGold" class="value">0 G</div>
        </div>

        <div class="balance-box">
            <div class="label">ì§€ê°‘ ì—°ê²° ìƒíƒœ</div>
            <div id="walletStatus" class="value" style="color: #ff6b6b; font-size: 18px;">ì—°ê²°ë˜ì§€ ì•ŠìŒ</div>
            <div id="myAddress" class="wallet-address"></div>
        </div>

        <button class="connect-btn" onclick="connectWallet()">
            ğŸ¦Š ì§€ê°‘ ì—°ê²° & í™˜ì „ ì‹ ì²­
        </button>
        
        <br>
        <button class="back-btn" onclick="location.href='lobby.html'">â—€ ì»¤ë§¨ë“œ ì„¼í„°ë¡œ ë³µê·€</button>
    </div>

    <script>
        let currentGold = localStorage.getItem('adv_gold') ? parseInt(localStorage.getItem('adv_gold')) : 0;
        document.getElementById('myGold').innerText = currentGold + " G";

        // [Mâ™¥R] ë©”íƒ€ë§ˆìŠ¤í¬ ì—°ê²° ë§ˆë²• í•¨ìˆ˜
        async function connectWallet() {
            // 1. ë©”íƒ€ë§ˆìŠ¤í¬ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            if (typeof window.ethereum !== 'undefined') {
                try {
                    // 2. ì§€ê°‘ ì—°ê²° ìš”ì²­ (ì—¬ê¸°ê°€ í•µì‹¬!)
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const account = accounts[0]; // ì—°ê²°ëœ ì²« ë²ˆì§¸ ì§€ê°‘ ì£¼ì†Œ

                    // 3. í™”ë©´ì— ì£¼ì†Œ í‘œì‹œ
                    document.getElementById('walletStatus').innerText = "âœ… ì—°ê²°ë¨ (Active)";
                    document.getElementById('walletStatus').style.color = "#2ea043";
                    document.getElementById('myAddress').innerText = account;

                    // 4. í™˜ì „ ë¡œì§ (ì‹¤ì œ ì „ì†¡ì€ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ í•„ìš”í•˜ì§€ë§Œ, ì—¬ê¸°ì„  ì—°ê²° ì„±ê³µ ë©”ì‹œì§€)
                    if(currentGold > 0) {
                        alert("ğŸ‰ ì§€ê°‘ ì—°ê²° ì„±ê³µ!\n\në‚´ ì§€ê°‘ ì£¼ì†Œ: " + account + "\n\ní˜„ì¬ ë³´ìœ í•œ " + currentGold + "Gì— ëŒ€í•œ ì½”ì¸ ì§€ê¸‰ ìš”ì²­ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    } else {
                        alert("âš ï¸ ì§€ê°‘ì€ ì—°ê²°ë˜ì—ˆì§€ë§Œ, í™˜ì „í•  ê³¨ë“œê°€ ì—†ìŠµë‹ˆë‹¤!");
                    }

                } catch (error) {
                    alert("âŒ ì—°ê²° ê±°ë¶€ë¨: " + error.message);
                }
            } else {
                // ë©”íƒ€ë§ˆìŠ¤í¬ê°€ ì—†ì„ ë•Œ
                alert("ğŸ¦Š ë©”íƒ€ë§ˆìŠ¤í¬(MetaMask) ì•±ì´ í•„ìš”í•©ë‹ˆë‹¤!\nì•±ìŠ¤í† ì–´ì—ì„œ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.");
                window.open('https://metamask.io/download.html');
            }
        }
    </script>
</body>
</html>
